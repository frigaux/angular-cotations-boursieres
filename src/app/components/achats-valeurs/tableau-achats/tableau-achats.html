@if (achatsValeursDecores) {
  <table>
    <thead>
    <tr>
      <th></th>
      <th>{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU.VALEUR' | translate }}</th>
      <th>{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU.DATE' | translate }}</th>
      <th>{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU.PRIX' | translate }}</th>
      <th>{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU.QUANTITE' | translate }}</th>
      <th>{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU.TOTAL' | translate }}</th>
      <th>{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU.CLOTURE' | translate }}</th>
      <th>{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU.VARIATION_ACHAT' | translate }}</th>
      <th>{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU.TOTAL_CLOTURE' | translate }}</th>
    </tr>
    </thead>
    <tbody>
      @for (achatsValeurDecores of achatsValeursDecores; track achatsValeurDecores.id) {
        @for (achatDecore of achatsValeurDecores.achatsDecores; track achatDecore.id) {
          <tr>
            <td>
              <span class="pi pi-trash" title="{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU.SUPPRESSION' | translate }}"
                    (click)="suppressionAchat($event, achatsValeurDecores, achatDecore)"></span>
              @if (!achatDecore.achat.revendu) {
                <span class="pi pi-euro" title="{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU.REVENTE' | translate }}"
                      (click)="reventeAchat($event, achatsValeurDecores, achatDecore)"></span>
              }
            </td>
            <td>{{ achatsValeurDecores.valeur.libelle }}</td>
            <td>{{ achatDecore.achat.date | date: 'dd/MM/yyyy' }}</td>
            <td>{{ achatDecore.achat.prix  | currency:'€' }}</td>
            <td>{{ achatDecore.achat.quantite  | number }}</td>
            <td>{{ (achatDecore.achat.prix * achatDecore.achat.quantite)  | currency:'€' }}</td>
            <td [class]="evolutionVariation(achatDecore.variation)">{{ achatDecore.cloture | currency:'€' }}</td>
            <td [class]="evolutionVariation(achatDecore.variation)">
              {{ achatDecore.variation | percent:'1.2-2' }}
            </td>
            <td [class]="evolutionVariation(achatDecore.variation)">{{ (achatDecore.cloture! * achatDecore.achat.quantite)  | currency:'€' }}</td>
          </tr>
        }
      }
      @if (achatsValeursDecores.length > 0) {
        <tr class="totaux">
          <td>{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU.TOTAUX' | translate }}</td>
          <td></td>
          <td></td>
          <td></td>
          <td>{{ totalQuantite  | number }}</td>
          <td>{{ totauxAchats  | currency:'€' }}</td>
          <td></td>
          <td></td>
          <td>{{ totauxClotures  | currency:'€' }}</td>
        </tr>
      }
    </tbody>
  </table>
}
