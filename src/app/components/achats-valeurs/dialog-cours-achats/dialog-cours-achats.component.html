<p-dialog [showHeader]="false" [modal]="true" [(visible)]="visible">
  <div class="barre-superieure-sticky">
    <h2>
      {{ 'COMPOSANTS.ACHATS_VALEURS.DIALOG_COURS.COURS_ACHATS' | translate }}
    </h2>
    <span class="pi pi-refresh" (click)="rafraichir()"
          title="{{ 'COMPOSANTS.ACHATS_VALEURS.DIALOG_COURS.RAFRAICHIR' | translate }}"></span>
    <span class="pi pi-times-circle" (click)="fermer()"
          title="{{ 'COMPOSANTS.ACHATS_VALEURS.DIALOG_COURS.FERMER' | translate }}"></span>
  </div>

  <app-loader [affiche]="loading" [configuration]="[
      {marginLeft: '0', marginTop: '1rem', height: '20vh', width: '100%'}
  ]"></app-loader>

  @if (!loading) {
    @if (ordresAchats && ordresAchats.length > 0) {
      <h3>{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU_ORDRES_ACHATS' | translate }}</h3>
      <app-tableau-achats [achats]="{achats: ordresAchats, etape: EtapeValeur.ORDRE_ACHAT}"></app-tableau-achats>
    }
    @if (achats && achats.length > 0) {
      <h3>{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU_ACHATS' | translate }}</h3>
      <app-tableau-achats [achats]="{achats, etape: EtapeValeur.ACHAT}"></app-tableau-achats>
    }
    @if (ordresVentes && ordresVentes.length > 0) {
      <h3>{{ 'COMPOSANTS.ACHATS_VALEURS.TABLEAU_ORDRES_VENTES' | translate }}</h3>
      <app-tableau-achats [achats]="{achats: ordresVentes, etape: EtapeValeur.ORDRE_VENTE}"></app-tableau-achats>
    }
  }
</p-dialog>
